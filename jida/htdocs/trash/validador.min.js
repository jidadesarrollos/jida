(function(d){function k(a,b){d(this);return this.each(function(b,c){new jValidador(this,a)})}jValidador=function(a,b){this._default={funcionError:this.mensajeError,totalError:!1,divError:!1,cssError:"div-error",vControl:!0,post:!1,prev:!1,validaciones:!1};this.$ele=d(a);this.config=b;this.errores={};this.config="object"==typeof this.config?d.extend(this._default,this.config):this._default;this.$ele.data("config",this.config);this.$form=d(this.$ele[0].form);var e=this;this.validacionesForm=this.config.validaciones? this.config.validaciones:this.obtenerValidaciones(this.$form);console.log(this.validacionesForm);this.$ele.data("jd.validador",this);this.$form.data("jd.validador",this);d("input, select, textarea,button").on("click",function(){d("."+e.config.cssError).remove()});this.$ele.on("click submit",this.init)};jValidador.VERSION="1.0";jValidador.replaceAll=function(a,b,e){e||(e="");var c=a,d=a.indexOf(b);if(-1<d)for(;-1<d;)c=a.substring(0,d),c=c+e+a.substring(d+1),d=c.indexOf(b),a=c;return c};d.fn.validadorJida= k;jValidador.prototype={init:function(a){$btn=d(this);jv=$btn.data("jd.validador");jv.errores={};bandera=!0;jv.validarFuncionesExternas("prev")&&(d.each(jv.validacionesForm,function(a,e){1==bandera&&($campo=d("#"+a),bandera=jv.validar($campo,e)?!0:!1)}),bandera?bandera=jv.validarFuncionesExternas("post"):jv.mensajeError());return bandera},validarFuncionesExternas:function(a){return 0!=this.config[a]&&"undefined"!=typeof this.config[a]?result="string"==typeof this.config[a]?eval(this.config[a]).call(): this.config[a].call():!0},obtenerValidaciones:function(a){var b=this,e={};d.each(a[0].elements,function(a,g){var f=d(g),h=f.data("validacion");""!=h&&(e[f.attr("id")]=b.verificarValidaciones(h))});return e},validar:function(a,b){var e=!0;if(1==b.obligatorio||"object"==typeof b.obligatorio)e=jv.obligatorio(a,b.obligatorio);e?d.each(b,function(c,b){type=typeof parametros;if(0!=b&&1==e&&"obligatorio"!=c)if(jv[c])jv[c](a,c,b)||(jv.errores[a.attr("id")]=c,e=!1);else if(jValidador.validaciones[c])jv.ejecutarValidacion(a, c)||(jv.errores[a.attr("id")]=c,e=!1);else throw Error("No existe la validacion solicitada "+c);}):jv.errores[a.attr("id")]="obligatorio";return e},ejecutarValidacion:function(a,b){var e=jValidador.validaciones[b].expr,c=a.val();if("numerico"==b||"decimal"==b)c=jValidador.replaceAll(c,"."),"decimal"==b&&c.replace(",",".");return""!=c?e.test(c)?!0:!1:!0},mensajeError:function(){var a=jv.errores;if(!jv.totalError){campo=obj=[Object.keys(a)[0]];a=d("#"+campo);d("."+jv.config.ccsError).remove();var b= jv.validacionesForm[campo][jv.errores[campo]].mensaje?jv.validacionesForm[campo][jv.errores[campo]].mensaje:jValidador.validaciones[jv.errores[campo]].mensaje;d(window).scrollTop(a.offset().top-150);a.focus();jv.config.divError?d(jv.config.divError).html('<div class="'+jv.config.cssError+'">'+b+"</div>"):a.before('<div class="'+jv.config.cssError+'">'+b+"</div>")}},verificarValidaciones:function(a){var b={numerico:!1,documentacion:!1,obligatorio:!1,caracteres:!1};return"undefined"!=typeof a?(a instanceof Array&&(newObject={},d.each(a,function(a,b){newObject[b]=!0}),a=newObject),d.extend(b,a)):b},mensajeErrorOld:function(a){before=before?!0:!1;jvalidador.funcionError?jvalidador.funcionError.call(this,a,mensaje):(d(window).scrollTop(d(a).offset().top-150),d(a).focus(),divError?d(divError).before('<div class="'+this.cssError+'">'+mensaje+"</div>"):d(divError).html('<div class="'+this.cssError+'">'+mensaje+"</div>"))},obligatorio:function(a,b){var e=a.attr("type");a.attr("id");var c=!0;b.condicional? (c=d("#"+b.condicional),b.tipo&&"radio"==b.tipo?(nombreCampo=c.attr("name"),c=d("input[name="+nombreCampo+"]:checked").val()):c=c.val(),c=c==b.condicion?!0:!1):c=!0;if(!0===c)switch(console.log(a.attr("id")+" "+e),e){case "RADIO":case "radio":nombreCampo=a.attr("name");resp.radio=!0;resp=0<d("input[name="+nombreCampo+"]:checked").length?!0:!1;break;default:resp=""==a.val()?!1:!0}else resp=!0;return resp},documentacion:function(a,b,e){b=jValidador.validaciones[b].expr;var c=a.val();e.campo_codigo&& (c=d("#"+a.attr("id")+"-tipo-doc").val()+c);return""!=c?b.test(c)?!0:!1:!0},telefono:function(a,b,e){var c="",g="",f=jValidador.validaciones.telefono.expr,h=jValidador.validaciones.internacional.expr;b=a.val();e.code&&(c=d("#"+a.attr("id")+"-codigo").val(),jv.divMsjError="#box"+jValidador.replaceAll(id,"#",""));e.ext&&(g=d("#"+a.attr("id")+"-ext").val());b=c+b+g;return""!=b?(a=h.test(b)?1:0,f=f.test(b)?1:0,b=expresionInter.test(b)?1:0,e.tipo&&("telefono"==e.tipo&&1==f||"celular"==e.tipo&&1==a||"internacional"== e.tipo&&1==b||"multiple"==e.tipo&&(1==f||1==a))||!e.tipo&&1==f?!0:!1):!0},igualdad:function(a,b,e){campo=d("#"+e.campo);return a.val()==campo.val()?!0:!1},contrasenia:function(a,b,e){var c=jValidador.validaciones.minuscula.expr,d=jValidador.validaciones.mayuscula.expr;e=jValidador.validaciones.numero.expr;b=jValidador.validaciones.caracteresEsp.expr;a=a.val();return""!=a?(c=c.test(a)?1:0,d=d.test(a)?1:0,e=e.test(a)?1:0,b=b.test(a)?1:0,1==c&&1==d&&1==e&&1==b&&8<=a.length?!0:!1):!1},tiny:function(a, b,d){nombreCampo=a.attr("name");var c=tinyMCE.get(nombreCampo);c.setProgressState(1);window.setTimeout(function(){c.setProgressState(0)},300);if(""==c.getContent()&&1==d.obligatorio)return!1;contenido=c.getContent();a.val(contenido);return!0}};jValidador.validaciones={obligatorio:{mensaje:"El campo no puede estar vacio"},email:{expr:/^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,3})$/,mensaje:"El campo debe ser un mail"},numerico:{expr:/^\d+$/,mensaje:"El campo debe ser numerico"}, moneda:{expr:/^\d+$/,mensaje:"El campo debe ser numerico"},decimal:{expr:/^([0-9])*[.|,]?[0-9]*$/,mensaje:"El campo debe ser numerico con decimales"},caracteres:{expr:/^[A-Z\u00f1\u00d1a-z\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da ]*$/,mensaje:"El campo solo puede contener caracteres"},celular:{expr:/^(412|416|414|424|426)\d{7}$/,mensaje:"El formato del celular no es valido"},telefono:{expr:/^2[0-9]{9,13}$/,mensaje:"El formato del telefono no es valido"},caracteresEspeciales:{expr:/^([^(*=;\\)])*$/, mensajes:"Caracteres invalidos en el campo"},tiny:{mensaje:"El campo es obligatorio"},alfanumerico:{expr:/^[\dA-Z\u00f1\u00d1a-z\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da.,\' ]*$/,mensaje:"El campo solo puede contener letras y numeros"},documentacion:{expr:/^([V|E|G|J|P|N]{1}\d{8,10})*$/,mensaje:"El campo debe tener el siguiente formato J-18935170"},programa:{expr:/^[\d\/\.A-Za-z_-]*$/,mensaje:"El campo solo puede contener letras, guion y underscore"},minuscula:{expr:/[a-z]/,mensaje:"La contrase\u00f1a debe tener al menos una minuscula"}, mayuscula:{expr:/[A-Z]/,mensaje:"La contrase\u00f1a debe tener al menos una mayuscula"},numero:{expr:/[0-9]/,mensaje:"La contrase\u00f1a debe tener al menos un n\u00famero"},caracteresEsp:{expr:/(\||\!|\"|\#|\$|\%|\&|\/|\(|\)|\=|\'|\?|\<|\>|\,|\;|\.|\:|\-|\_|\*|\~|\^|\{|\}|\+)/,mensaje:"La contrase\u00f1a debe tener al menos un caracter especial"},coordenada:{expr:/^\-?[0-9]{2}\.[0-9]{3,15}/,mensaje:"La coordenada debe tener el siguiente formato:"},internacional:{expr:/^\d{9,18}$/,mensaje:"El telefono internacional no es valido"}}; d.fn.jValidador=k;d.each(d('[data-jida="validador"]'),function(a){data=d(this).data("config");new jValidador(this,data)})})(jQuery);